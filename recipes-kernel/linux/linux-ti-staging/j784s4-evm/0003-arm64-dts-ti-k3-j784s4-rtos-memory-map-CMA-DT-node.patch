From df3c0ba9b722f764007d6107c8a5d5f3508a57b2 Mon Sep 17 00:00:00 2001
From: Aniket Limaye <a-limaye@ti.com>
Date: Fri, 20 Jan 2023 18:54:35 +0530
Subject: [PATCH] arm64: dts: ti: k3-j784s4-rtos-memory-map: CMA DT node

- Adding in a DT node to reserve 512MB for CMA allocation in the upper space
- Carrying until kernel command line based solution is feasible:
  https://jira.itg.ti.com/browse/LCPD-32468

Signed-off-by: Aniket Limaye <a-limaye@ti.com>
---
 arch/arm64/boot/dts/ti/k3-j784s4-rtos-memory-map.dtsi | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/arm64/boot/dts/ti/k3-j784s4-rtos-memory-map.dtsi b/arch/arm64/boot/dts/ti/k3-j784s4-rtos-memory-map.dtsi
index 30c862dd3..d0f3ffa04 100644
--- a/arch/arm64/boot/dts/ti/k3-j784s4-rtos-memory-map.dtsi
+++ b/arch/arm64/boot/dts/ti/k3-j784s4-rtos-memory-map.dtsi
@@ -277,6 +277,12 @@
 		reg = <0x08 0x80000000 0x00 0x40000000>;
 		no-map;
 	};
+	linux_cma_region: linux-cma-buffers@8c0000000 {
+		compatible = "shared-dma-pool";
+		reusable;
+		reg = <0x08 0xc0000000 0x00 0x20000000>;
+		linux,cma-default;
+	};
 };
 
 &mcu_r5fss0_core0 {
-- 
2.17.1

