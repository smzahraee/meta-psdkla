From d17287cdb60578293bff9f3fdb758d517db41122 Mon Sep 17 00:00:00 2001
From: Dharma B <dharma.b@ti.com>
Date: Fri, 18 Mar 2022 11:23:35 +0530
Subject: [PATCH] HACK: arm: dts: am57xx: add am57[1,2,4]x-idk-pps.dts

This commit adds the am57[1,2,4]x-idk-pps.dts which is extension of the
am57[1,2,4]x-idk.dts. It enables the PPS IO pins (sync/latch) and PTP BC
bindings at the modified AM571x-idk EVM where the USB/LCD Display
are disabled.

Signed-off-by: Dharma B <dharma.b@ti.com>
---
 arch/arm/boot/dts/Makefile               |   5 +-
 arch/arm/boot/dts/am57-pruss.dtsi        |   7 ++
 arch/arm/boot/dts/am57xx-idk-common.dtsi |  13 +-
 arch/arm/boot/dts/dra7-l4.dtsi           |   2 +-
 arch/arm/boot/dts/ti/Makefile            |   7 +-
 arch/arm/boot/dts/ti/am571x-idk-pps.dts  | 147 +++++++++++++++++++++++
 arch/arm/boot/dts/ti/am572x-idk-pps.dts  | 130 ++++++++++++++++++++
 arch/arm/boot/dts/ti/am574x-idk-pps.dts  | 130 ++++++++++++++++++++
 arch/arm/boot/dts/ti/dtb-merge.cfg       |   3 +
 9 files changed, 437 insertions(+), 7 deletions(-)
 create mode 100644 arch/arm/boot/dts/ti/am571x-idk-pps.dts
 create mode 100644 arch/arm/boot/dts/ti/am572x-idk-pps.dts
 create mode 100644 arch/arm/boot/dts/ti/am574x-idk-pps.dts

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index 6a507a149c84..a818e3dc022c 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -869,7 +869,10 @@ dtb-$(CONFIG_SOC_DRA7XX) += \
 dtb-merge-$(CONFIG_SOC_DRA7XX) += \
	am57xx-evm.dtb \
	am57xx-evm-reva3.dtb \
-	dra71-evm-nand.dtb
+	dra71-evm-nand.dtb \
+	am571x-idk-pps.dtb \
+	am572x-idk-pps.dtb \
+	am574x-idk-pps.dtb
 dtb-$(CONFIG_ARCH_ORION5X) += \
	orion5x-kuroboxpro.dtb \
	orion5x-lacie-d2-network.dtb \
diff --git a/arch/arm/boot/dts/am57-pruss.dtsi b/arch/arm/boot/dts/am57-pruss.dtsi
index 704f68898508..c35131761b64 100644
--- a/arch/arm/boot/dts/am57-pruss.dtsi
+++ b/arch/arm/boot/dts/am57-pruss.dtsi
@@ -5,6 +5,13 @@
  * Common PRUSS data for TI AM57xx platforms
  */

+/ {
+	aliases {
+		pruss_iep1 = &pruss1_iep;
+		pruss_iep2 = &pruss2_iep;
+	};
+};
+
 &ocp {
	pruss1_tm: target-module@4b226000 {
		compatible = "ti,sysc-pruss", "ti,sysc";
diff --git a/arch/arm/boot/dts/am57xx-idk-common.dtsi b/arch/arm/boot/dts/am57xx-idk-common.dtsi
index 15aa70c4457f..a064db43be78 100644
--- a/arch/arm/boot/dts/am57xx-idk-common.dtsi
+++ b/arch/arm/boot/dts/am57xx-idk-common.dtsi
@@ -172,8 +172,8 @@
		pruss2_emac0: ethernet-mii0 {
			phy-handle = <&pruss2_eth0_phy>;
			phy-mode = "mii";
-			interrupts = <20 2 2>, <26 6 6>;
-			interrupt-names = "rx", "emac_ptp_tx";
+			interrupts = <20 2 2>, <26 6 6>, <23 6 6>;
+			interrupt-names = "rx", "emac_ptp_tx", "hsr_ptp_tx";
			ti,no-half-duplex;
			/* Filled in by bootloader */
			local-mac-address = [00 00 00 00 00 00];
@@ -182,13 +182,18 @@
		pruss2_emac1: ethernet-mii1 {
			phy-handle = <&pruss2_eth1_phy>;
			phy-mode = "mii";
-			interrupts = <21 3 3>, <27 9 7>;
-			interrupt-names = "rx", "emac_ptp_tx";
+			interrupts = <21 3 3>, <27 9 7>, <24 9 7>;
+			interrupt-names = "rx", "emac_ptp_tx", "hsr_ptp_tx";
			ti,no-half-duplex;
			/* Filled in by bootloader */
			local-mac-address = [00 00 00 00 00 00];
		};
	};
+
+	ptp_bc: ptp_bc {
+		compatible = "ti,am57-bc";
+		status = "disabled";
+	};
 };

 &pruss2_iep {
diff --git a/arch/arm/boot/dts/dra7-l4.dtsi b/arch/arm/boot/dts/dra7-l4.dtsi
index 9611c138d870..f46b0485b846 100644
--- a/arch/arm/boot/dts/dra7-l4.dtsi
+++ b/arch/arm/boot/dts/dra7-l4.dtsi
@@ -3084,7 +3084,7 @@
					reg = <0x1000 0x100>;
				};

-				cpts {
+				cpts: cpts {
					clocks = <&gmac_clkctrl DRA7_GMAC_GMAC_CLKCTRL 25>;
					clock-names = "cpts";
				};
diff --git a/arch/arm/boot/dts/ti/Makefile b/arch/arm/boot/dts/ti/Makefile
index 5764388e6302..b66eb0176e95 100644
--- a/arch/arm/boot/dts/ti/Makefile
+++ b/arch/arm/boot/dts/ti/Makefile
@@ -37,7 +37,12 @@ dtb-$(CONFIG_SOC_DRA7XX) += \
	dra71-evm-lcd-auo-g101evn01.0.dtbo \
	dra76-evm-tfp410.dtbo \
	dra71-evm-nand.dtb \
-	ov10635.dtbo
+	ov10635.dtbo \
+	am57xx-evm-common.dtbo \
+	am571x-idk-pps.dtbo \
+	am572x-idk-pps.dtbo \
+	am574x-idk-pps.dtbo
+

 $(obj)/%.dtb: $(src)/../%.dts FORCE
	$(call if_changed_dep,dtc,dtb)
diff --git a/arch/arm/boot/dts/ti/am571x-idk-pps.dts b/arch/arm/boot/dts/ti/am571x-idk-pps.dts
new file mode 100644
index 000000000000..eae0e88c0ea9
--- /dev/null
+++ b/arch/arm/boot/dts/ti/am571x-idk-pps.dts
@@ -0,0 +1,147 @@
+// SPDX-License-Identifier: GPL-2.0
+/*
+ * Copyright (C) 2019-2020 Texas Instruments Incorporated - http://www.ti.com/
+ */
+
+/dts-v1/;
+/plugin/;
+
+#include <dt-bindings/clock/dra7.h>
+#include <dt-bindings/gpio/gpio.h>
+#include <dt-bindings/pinctrl/dra.h>
+
+&mac_sw {
+	pinctrl-names = "pwm_off", "pwm_on", "ref_off", "ref_on",
+		"latch_on", "latch_off";
+	pinctrl-0 = <&pps1_timer16_pwm_off>;
+	pinctrl-1 = <&pps1_timer16_pwm_on>;
+	pinctrl-2 = <&pps1_timer16_pwm2_off>;
+	pinctrl-3 = <&pps1_timer16_pwm2_on>;
+	pinctrl-4 = <&pps1_timer15_latch_on>;
+	pinctrl-5 = <&pps1_timer15_latch_off>;
+
+	pps-enable-gpios = <&gpio1 5 GPIO_ACTIVE_HIGH>;
+	ref-enable-gpios = <&gpio6 19 GPIO_ACTIVE_HIGH>;
+	assigned-clocks = <&l4per3_clkctrl DRA7_L4PER3_TIMER16_CLKCTRL 24>, <&l4per3_clkctrl DRA7_L4PER3_TIMER15_CLKCTRL 24>;
+	assigned-clock-parents = <&abe_giclk_div>, <&abe_giclk_div>;
+};
+
+&cpts {
+	/* cptr pps1 generator and latch properties */
+	pps_timer = <&timer16>;
+	latch_timer = <&timer15>;
+};
+
+&dpll_abe_ck {
+	assigned-clocks = <&dpll_abe_ck>;
+	assigned-clock-rates = <50000000>;
+};
+
+&pruss1_iep {
+	pinctrl-names = "sync0_off", "sync0_on", "latch0_off", "latch0_on";
+	pinctrl-0 = <&pr1_edc_sync0_off>;
+	pinctrl-1 = <&pr1_edc_sync0_on>;
+	pinctrl-2 = <&pr1_edc_latch0_off>;
+	pinctrl-3 = <&pr1_edc_latch0_on>;
+};
+
+&pruss2_iep {
+	pinctrl-names = "sync0_off", "sync0_on", "latch0_off", "latch0_on";
+	pinctrl-0 = <&pr2_edc_sync0_off>;
+	pinctrl-1 = <&pr2_edc_sync0_on>;
+	pinctrl-2 = <&pr2_edc_latch0_off>;
+	pinctrl-3 = <&pr2_edc_latch0_on>;
+};
+
+&dra7_pmx_core {
+pps1_timer16_pwm_on: pps1_timer16_pwm_on {
+			     pinctrl-single,pins = <
+				     DRA7XX_CORE_IOPAD(0x36a0, PIN_OUTPUT | MUX_MODE10)
+				     >;
+		     };
+
+pps1_timer16_pwm_off: pps1_timer16_pwm_off {
+			      pinctrl-single,pins = <
+				      DRA7XX_CORE_IOPAD(0x36a0, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				      >;
+		      };
+
+pps1_timer16_pwm2_on: pps1_timer16_pwm2_on {
+			      pinctrl-single,pins = <
+				      DRA7XX_CORE_IOPAD(0x3680, PIN_OUTPUT | MUX_MODE7)
+				      >;
+		      };
+
+pps1_timer16_pwm2_off: pps1_timer16_pwm2_off {
+			       pinctrl-single,pins = <
+				       DRA7XX_CORE_IOPAD(0x3680, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				       >;
+		       };
+
+pps1_timer15_latch_on: pps1_timer15_latch_on {
+			       pinctrl-single,pins = <
+				       DRA7XX_CORE_IOPAD(0x3684, PIN_INPUT | MUX_MODE7)
+				       >;
+		       };
+
+pps1_timer15_latch_off: pps1_timer15_latch_off {
+				pinctrl-single,pins = <
+					DRA7XX_CORE_IOPAD(0x3684, PIN_INPUT | MUX_MODE15)
+					>;
+			};
+
+pr1_edc_sync0_on: pr1_edc_sync0_on {
+			  pinctrl-single,pins = <
+				  DRA7XX_CORE_IOPAD(0x3724, PIN_OUTPUT | MUX_MODE13)
+				  >;
+		  };
+
+pr1_edc_sync0_off: pr1_edc_sync0_off {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x3724, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				   >;
+		   };
+
+pr1_edc_latch0_on: pr1_edc_latch0_on {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x3694, PIN_INPUT | MUX_MODE12)
+				   >;
+		   };
+
+pr1_edc_latch0_off: pr1_edc_latch0_off {
+			    pinctrl-single,pins = <
+				    DRA7XX_CORE_IOPAD(0x3694, PIN_INPUT | MUX_MODE15)
+				    >;
+		    };
+
+pr2_edc_sync0_on: pr2_edc_sync0_on {
+			  pinctrl-single,pins = <
+				  DRA7XX_CORE_IOPAD(0x3728, PIN_OUTPUT | MUX_MODE13)
+				  >;
+		  };
+
+pr2_edc_sync0_off: pr2_edc_sync0_off {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x3728, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				   >;
+		   };
+
+pr2_edc_latch0_on: pr2_edc_latch0_on {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x3698, PIN_INPUT | MUX_MODE12)
+				   >;
+		   };
+
+pr2_edc_latch0_off: pr2_edc_latch0_off {
+			    pinctrl-single,pins = <
+				    DRA7XX_CORE_IOPAD(0x3698, PIN_INPUT | MUX_MODE15)
+				    >;
+		    };
+};
+
+&ptp_bc {
+	pps-sel0-gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+	pps-sel1-gpios = <&gpio6 7 GPIO_ACTIVE_HIGH>;
+
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/ti/am572x-idk-pps.dts b/arch/arm/boot/dts/ti/am572x-idk-pps.dts
new file mode 100644
index 000000000000..6f8e0e57d0ec
--- /dev/null
+++ b/arch/arm/boot/dts/ti/am572x-idk-pps.dts
@@ -0,0 +1,130 @@
+// SPDX-License-Identifier: GPL-2.0
+/*
+ * Copyright (C) 2019-2020 Texas Instruments Incorporated - http://www.ti.com/
+ */
+
+/dts-v1/;
+/plugin/;
+
+#include <dt-bindings/clock/dra7.h>
+#include <dt-bindings/gpio/gpio.h>
+#include <dt-bindings/pinctrl/dra.h>
+
+&mac_sw {
+	pinctrl-names = "pwm_off", "pwm_on", "ref_off", "ref_on",
+		"latch_on", "latch_off";
+	pinctrl-0 = <&pps1_timer16_pwm_off>;
+	pinctrl-1 = <&pps1_timer16_pwm_on>;
+	pinctrl-2 = <&pps1_timer16_pwm2_off>;
+	pinctrl-3 = <&pps1_timer16_pwm2_on>;
+	pinctrl-4 = <&pps1_timer15_latch_on>;
+	pinctrl-5 = <&pps1_timer15_latch_off>;
+
+	pps-enable-gpios = <&gpio1 5 GPIO_ACTIVE_HIGH>;
+	ref-enable-gpios = <&gpio6 19 GPIO_ACTIVE_HIGH>;
+	assigned-clocks = <&l4per3_clkctrl DRA7_L4PER3_TIMER16_CLKCTRL 24>, <&l4per3_clkctrl DRA7_L4PER3_TIMER15_CLKCTRL 24>;
+	assigned-clock-parents = <&abe_giclk_div>, <&abe_giclk_div>;
+};
+
+&cpts {
+	/* cptr pps1 generator and latch properties */
+	pps_timer = <&timer16>;
+	latch_timer = <&timer15>;
+};
+
+&dpll_abe_ck {
+	assigned-clocks = <&dpll_abe_ck>;
+	assigned-clock-rates = <50000000>;
+};
+
+&pruss2_iep {
+	pinctrl-names = "sync0_off", "sync0_on", "latch0_off", "latch0_on",
+		"sync1_off", "sync1_on";
+	pinctrl-0 = <&pr2_edc_sync0_off>;
+	pinctrl-1 = <&pr2_edc_sync0_on>;
+	pinctrl-2 = <&pr2_edc_latch0_off>;
+	pinctrl-3 = <&pr2_edc_latch0_on>;
+	pinctrl-4 = <&pr2_edc_sync1_off>;
+	pinctrl-5 = <&pr2_edc_sync1_on>;
+};
+
+&dra7_pmx_core {
+pps1_timer16_pwm_on: pps1_timer16_pwm_on {
+			     pinctrl-single,pins = <
+				     DRA7XX_CORE_IOPAD(0x36a0, PIN_OUTPUT | MUX_MODE10)
+				     >;
+		     };
+
+pps1_timer16_pwm_off: pps1_timer16_pwm_off {
+			      pinctrl-single,pins = <
+				      DRA7XX_CORE_IOPAD(0x36a0, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				      >;
+		      };
+
+pps1_timer16_pwm2_on: pps1_timer16_pwm2_on {
+			      pinctrl-single,pins = <
+				      DRA7XX_CORE_IOPAD(0x3680, PIN_OUTPUT | MUX_MODE7)
+				      >;
+		      };
+
+pps1_timer16_pwm2_off: pps1_timer16_pwm2_off {
+			       pinctrl-single,pins = <
+				       DRA7XX_CORE_IOPAD(0x3680, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				       >;
+		       };
+
+pps1_timer15_latch_on: pps1_timer15_latch_on {
+			       pinctrl-single,pins = <
+				       DRA7XX_CORE_IOPAD(0x3684, PIN_INPUT | MUX_MODE7)
+				       >;
+		       };
+
+pps1_timer15_latch_off: pps1_timer15_latch_off {
+				pinctrl-single,pins = <
+					DRA7XX_CORE_IOPAD(0x3684, PIN_INPUT | MUX_MODE15)
+					>;
+			};
+
+pr2_edc_sync0_on: pr2_edc_sync0_on {
+			  pinctrl-single,pins = <
+				  DRA7XX_CORE_IOPAD(0x35f8, PIN_OUTPUT | MUX_MODE10)
+				  >;
+		  };
+
+pr2_edc_sync0_off: pr2_edc_sync0_off {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x35f8, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				   >;
+		   };
+
+pr2_edc_latch0_on: pr2_edc_latch0_on {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x35f0, PIN_INPUT | MUX_MODE10)
+				   >;
+		   };
+
+pr2_edc_latch0_off: pr2_edc_latch0_off {
+			    pinctrl-single,pins = <
+				    DRA7XX_CORE_IOPAD(0x35f0, PIN_INPUT | MUX_MODE15)
+				    >;
+		    };
+
+pr2_edc_sync1_on: pr2_edc_sync1_on {
+			  pinctrl-single,pins = <
+				  DRA7XX_CORE_IOPAD(0x35fc, PIN_OUTPUT | MUX_MODE10)
+				  >;
+		  };
+
+pr2_edc_sync1_off: pr2_edc_sync1_off {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x35fc, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				   >;
+		   };
+};
+
+&ptp_bc {
+	pps-sel0-gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+	pps-sel1-gpios = <&gpio6 7 GPIO_ACTIVE_HIGH>;
+
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/ti/am574x-idk-pps.dts b/arch/arm/boot/dts/ti/am574x-idk-pps.dts
new file mode 100644
index 000000000000..6f8e0e57d0ec
--- /dev/null
+++ b/arch/arm/boot/dts/ti/am574x-idk-pps.dts
@@ -0,0 +1,130 @@
+// SPDX-License-Identifier: GPL-2.0
+/*
+ * Copyright (C) 2019-2020 Texas Instruments Incorporated - http://www.ti.com/
+ */
+
+/dts-v1/;
+/plugin/;
+
+#include <dt-bindings/clock/dra7.h>
+#include <dt-bindings/gpio/gpio.h>
+#include <dt-bindings/pinctrl/dra.h>
+
+&mac_sw {
+	pinctrl-names = "pwm_off", "pwm_on", "ref_off", "ref_on",
+		"latch_on", "latch_off";
+	pinctrl-0 = <&pps1_timer16_pwm_off>;
+	pinctrl-1 = <&pps1_timer16_pwm_on>;
+	pinctrl-2 = <&pps1_timer16_pwm2_off>;
+	pinctrl-3 = <&pps1_timer16_pwm2_on>;
+	pinctrl-4 = <&pps1_timer15_latch_on>;
+	pinctrl-5 = <&pps1_timer15_latch_off>;
+
+	pps-enable-gpios = <&gpio1 5 GPIO_ACTIVE_HIGH>;
+	ref-enable-gpios = <&gpio6 19 GPIO_ACTIVE_HIGH>;
+	assigned-clocks = <&l4per3_clkctrl DRA7_L4PER3_TIMER16_CLKCTRL 24>, <&l4per3_clkctrl DRA7_L4PER3_TIMER15_CLKCTRL 24>;
+	assigned-clock-parents = <&abe_giclk_div>, <&abe_giclk_div>;
+};
+
+&cpts {
+	/* cptr pps1 generator and latch properties */
+	pps_timer = <&timer16>;
+	latch_timer = <&timer15>;
+};
+
+&dpll_abe_ck {
+	assigned-clocks = <&dpll_abe_ck>;
+	assigned-clock-rates = <50000000>;
+};
+
+&pruss2_iep {
+	pinctrl-names = "sync0_off", "sync0_on", "latch0_off", "latch0_on",
+		"sync1_off", "sync1_on";
+	pinctrl-0 = <&pr2_edc_sync0_off>;
+	pinctrl-1 = <&pr2_edc_sync0_on>;
+	pinctrl-2 = <&pr2_edc_latch0_off>;
+	pinctrl-3 = <&pr2_edc_latch0_on>;
+	pinctrl-4 = <&pr2_edc_sync1_off>;
+	pinctrl-5 = <&pr2_edc_sync1_on>;
+};
+
+&dra7_pmx_core {
+pps1_timer16_pwm_on: pps1_timer16_pwm_on {
+			     pinctrl-single,pins = <
+				     DRA7XX_CORE_IOPAD(0x36a0, PIN_OUTPUT | MUX_MODE10)
+				     >;
+		     };
+
+pps1_timer16_pwm_off: pps1_timer16_pwm_off {
+			      pinctrl-single,pins = <
+				      DRA7XX_CORE_IOPAD(0x36a0, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				      >;
+		      };
+
+pps1_timer16_pwm2_on: pps1_timer16_pwm2_on {
+			      pinctrl-single,pins = <
+				      DRA7XX_CORE_IOPAD(0x3680, PIN_OUTPUT | MUX_MODE7)
+				      >;
+		      };
+
+pps1_timer16_pwm2_off: pps1_timer16_pwm2_off {
+			       pinctrl-single,pins = <
+				       DRA7XX_CORE_IOPAD(0x3680, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				       >;
+		       };
+
+pps1_timer15_latch_on: pps1_timer15_latch_on {
+			       pinctrl-single,pins = <
+				       DRA7XX_CORE_IOPAD(0x3684, PIN_INPUT | MUX_MODE7)
+				       >;
+		       };
+
+pps1_timer15_latch_off: pps1_timer15_latch_off {
+				pinctrl-single,pins = <
+					DRA7XX_CORE_IOPAD(0x3684, PIN_INPUT | MUX_MODE15)
+					>;
+			};
+
+pr2_edc_sync0_on: pr2_edc_sync0_on {
+			  pinctrl-single,pins = <
+				  DRA7XX_CORE_IOPAD(0x35f8, PIN_OUTPUT | MUX_MODE10)
+				  >;
+		  };
+
+pr2_edc_sync0_off: pr2_edc_sync0_off {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x35f8, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				   >;
+		   };
+
+pr2_edc_latch0_on: pr2_edc_latch0_on {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x35f0, PIN_INPUT | MUX_MODE10)
+				   >;
+		   };
+
+pr2_edc_latch0_off: pr2_edc_latch0_off {
+			    pinctrl-single,pins = <
+				    DRA7XX_CORE_IOPAD(0x35f0, PIN_INPUT | MUX_MODE15)
+				    >;
+		    };
+
+pr2_edc_sync1_on: pr2_edc_sync1_on {
+			  pinctrl-single,pins = <
+				  DRA7XX_CORE_IOPAD(0x35fc, PIN_OUTPUT | MUX_MODE10)
+				  >;
+		  };
+
+pr2_edc_sync1_off: pr2_edc_sync1_off {
+			   pinctrl-single,pins = <
+				   DRA7XX_CORE_IOPAD(0x35fc, PIN_OUTPUT_PULLDOWN | MUX_MODE15)
+				   >;
+		   };
+};
+
+&ptp_bc {
+	pps-sel0-gpios = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+	pps-sel1-gpios = <&gpio6 7 GPIO_ACTIVE_HIGH>;
+
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/ti/dtb-merge.cfg b/arch/arm/boot/dts/ti/dtb-merge.cfg
index 1b5b20940a8e..6f5e4890228b 100644
--- a/arch/arm/boot/dts/ti/dtb-merge.cfg
+++ b/arch/arm/boot/dts/ti/dtb-merge.cfg
@@ -1,3 +1,6 @@
 am57xx-evm: am57xx-beagle-x15.dtb am57xx-evm-common.dtbo
 am57xx-evm-reva3: am57xx-beagle-x15-revc.dtb am57xx-evm-common.dtbo am57xx-evm-reva3.dtbo
 dra71-evm-nand: dra71-evm.dtb dra71-evm-nand.dtb
+am571x-idk-pps: am571x-idk.dtb am571x-idk-pps.dtbo
+am572x-idk-pps: am572x-idk.dtb am572x-idk-pps.dtbo
+am574x-idk-pps: am574x-idk.dtb am574x-idk-pps.dtbo
--
2.17.0
