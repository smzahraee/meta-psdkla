From 774e1c47beaef4ebe344e5ee878d763e05c49aa7 Mon Sep 17 00:00:00 2001
From: root <root@bulbasaur.couthit.local>
Date: Thu, 16 Jun 2022 13:39:05 +0530
Subject: [PATCH] Support for ethtool statistics to track Non RCT tagged PRP
 frames

Signed-off-by: Parvathi <parvathi@couthit.com>
---
 drivers/net/ethernet/ti/prueth_lre.c | 2 ++
 drivers/net/ethernet/ti/prueth_lre.h | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/drivers/net/ethernet/ti/prueth_lre.c b/drivers/net/ethernet/ti/prueth_lre.c
index 7454fb91d..87590b0b1 100644
--- a/drivers/net/ethernet/ti/prueth_lre.c
+++ b/drivers/net/ethernet/ti/prueth_lre.c
@@ -982,6 +982,8 @@ static const struct {
 	{"lreDDCountPru1", PRUETH_LRE_STAT_OFS(lre_cnt_dd_pru1)},
 	{"lreCntSupPru0", PRUETH_LRE_STAT_OFS(lre_cnt_sup_pru0)},
 	{"lreCntSupPru1", PRUETH_LRE_STAT_OFS(lre_cnt_sup_pru1)},
+	{"lreNoPRPtagRxA", PRUETH_LRE_STAT_OFS(lre_no_prp_tag_rx_a)},
+        {"lreNoPRPtagRxB", PRUETH_LRE_STAT_OFS(lre_no_prp_tag_rx_b)},
 };
 
 void prueth_lre_set_stats(struct prueth *prueth,
diff --git a/drivers/net/ethernet/ti/prueth_lre.h b/drivers/net/ethernet/ti/prueth_lre.h
index 9ff3be4ff..e9a33cf70 100644
--- a/drivers/net/ethernet/ti/prueth_lre.h
+++ b/drivers/net/ethernet/ti/prueth_lre.h
@@ -80,6 +80,8 @@ struct lre_statistics {
 	u32 lre_cnt_dd_pru1; /* count of DD frames to host on PRU 1 */
 	u32 lre_cnt_sup_pru0; /* count of supervisor frames to host on PRU 0 */
 	u32 lre_cnt_sup_pru1; /* count of supervisor frames to host on PRU 1 */
+	u32 lre_no_prp_tag_rx_a; /* count of frames with no RCT tag to host on PRU 0 */
+        u32 lre_no_prp_tag_rx_b; /* count of frames with no RCT tag to host on PRU 1*/
 } __packed;
 
 /* node table info */
-- 
2.17.1

