From 245565828a2164a411318eeac54d890449ddec97 Mon Sep 17 00:00:00 2001
From: Sidraya Jayagond <sidraya.bj@ti.com>
Date: Mon, 5 Apr 2021 12:51:39 +0530
Subject: [PATCH] Removed Encode/Decoder Makefile dependency on .config

Removed Encoder/Decoder Makefile
inclusion .config

Signed-off-by: Sidraya Jayagond <sidraya.bj@ti.com>
---
 linux/decoder/Makefile | 5 +----
 linux/encoder/Makefile | 5 +----
 2 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/linux/decoder/Makefile b/linux/decoder/Makefile
index 568dbb1..f8bd0b5 100644
--- a/linux/decoder/Makefile
+++ b/linux/decoder/Makefile
@@ -2,12 +2,9 @@
 
 #Set PATH
 KPATH ?=path_for_ti-linux-kernel
-KCONF ?=${KPATH}
 
 PWD :=$(shell pwd)
 
-include $(KCONF)/.config
-
 DRIVER_PATH =../../driver
 OSAL_PATH =../../osal
 
@@ -159,7 +156,7 @@ endif
 
 ccflags-y   += -DOSAL_LINUX
 
-obj-$(CONFIG_VIDEO_IMG_VXD_DEC) += vxd-dec.o
+obj-m += vxd-dec.o
 
 ccflags-y += -I$(M) -I$(M)/$(DRIVER_PATH)/common/ -I$(M)/$(DRIVER_PATH)/decoder/ -I$(M)/$(OSAL_PATH)/../
 
diff --git a/linux/encoder/Makefile b/linux/encoder/Makefile
index 2a33aca..2172575 100644
--- a/linux/encoder/Makefile
+++ b/linux/encoder/Makefile
@@ -2,12 +2,9 @@
 
 #Set PATH
 KPATH ?=path_for_ti-linux-kernel
-KCONF ?=${KPATH}
 
 PWD :=$(shell pwd)
 
-include $(KCONF)/.config
-
 DRIVER_PATH =../../driver
 OSAL_PATH =../../osal
 
@@ -75,7 +72,7 @@ vxe-enc-objs += $(OSAL_PATH)/src/linux/osa_reg_io.o
 vxe-enc-objs += $(OSAL_PATH)/src/linux/osa_string.o
 vxe-enc-objs += $(OSAL_PATH)/src/linux/osa_event.o
 
-obj-$(CONFIG_VIDEO_IMG_VXE_ENC) += vxe-enc.o
+obj-m += vxe-enc.o
 
 ccflags-y   += -DOSAL_LINUX
 
-- 
2.17.1

